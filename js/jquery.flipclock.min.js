/* jQuery flip clock plugin - for details see https://github.com/andysellick/flipclock */
!function(t,e){var i=function(t,i){this.elem=t,this.$elem=e(t),this.options=i};i.prototype={init:function(){var i=this;i.units=["second","minute","hour","day","month","year"],i.time={year:0,month:0,day:0,hour:0,minute:0,second:0},i.prevtime={year:0,month:0,day:0,hour:0,minute:0,second:0},i.timelimits={year:1e4,month:11,day:366,hour:23,minute:59,second:59},i.timer=0,i.trigger=0,i.endofdays=0,i.timeZoneOffset=0,this.settings=e.extend({mode:"counter",showUnits:!0,showAllDigits:!1,targetDate:[2e3,1,1,0,0,0],stopAtZero:!1,timeZoneOffset:-1},this.defaults,this.options);var n={general:{overrideSettings:function(){var t=i.settings.targetDate.length;if(t<6)for(;t<6;t++)i.settings.targetDate.push(0);var e=i.settings.targetDate;if(i.settings.targetDate=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]),-1!==i.settings.timeZoneOffset){var n=new Date;n=n.getTimezoneOffset(),i.timeZoneOffset=n/60+i.settings.timeZoneOffset}},initElements:function(){i.$elem.html("").addClass("timewrap");var t=1;if("clock"===i.settings.mode){i.settings.targetDate=[2e3,1,1,0,0,0,0];var e=new Date;i.time.second=e.getSeconds(),i.time.minute=e.getMinutes(),i.time.hour=e.getHours()+i.timeZoneOffset,t=Math.floor(i.units.length/2-1)}else t=i.units.length-1;for(var a=t;a>-1;a--)n.markup.generateDigit(n.general.padDigits(i.time[i.units[a]],2),i.units[a]);n.general.backupTime(),i.settings.stopAtZero?n.markup.showDigit("second"):n.general.initCounter(),i.settings.showAllDigits&&i.$elem.find(".timeunit").addClass("shown")},getTimeNowTarget:function(){n.general.backupTime(),n.general.resetTime();var t=Date.now()+36e5*i.timeZoneOffset,e=moment.preciseDiff(t,i.settings.targetDate);if((e=e.split(" ")).length>1){i.endofdays=0;for(var a=0;a<e.length;a+=2){var s=e[a],r=e[a+1];"s"==r[r.length-1]&&(r=r.substring(0,r.length-1)),i.time[r]=s}}else i.endofdays=1,i.settings.stopAtZero&&(i.trigger.remove(),clearTimeout(i.timer))},initCounter:function(){i.trigger=e("<div/>").addClass("trigger").attr("data-id","trigger").appendTo(i.$elem);var t=1;setTimeout(function(){for(;t;)Date.now()%1e3==0&&(t=0,i.trigger.addClass("active"))},1),i.transitionEvent=function(){var t,e=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}(),i.trigger.on(i.transitionEvent,function(t){clearTimeout(i.timer),i.timer=setTimeout(function(){n.general.doCounter(),i.trigger.hasClass("active")?i.trigger.removeClass("active"):i.trigger.addClass("active")},0)})},doCounter:function(){n.general.getTimeNowTarget();for(var t=0,e=i.units.length-1;e>=0;e--)n.general.updateDigit(i.units[e]),t?n.markup.showDigit(i.units[e]):0===i.time[i.units[e]]&&0===i.prevtime[i.units[e]]&&"second"!==i.units[e]?n.markup.hideDigit(i.units[e]):(t=1,n.markup.showDigit(i.units[e]));n.general.backupTime()},updateDigit:function(t){var a=t,s=parseInt(i.time[t]);1!=s&&(a+="s");var r=i.prevtime[t];s=n.general.padDigits(s,2),r=n.general.padDigits(r,2);var o=i.$elem.find(".timeunit[data-name="+t+"]"),d=o.find(".digits").attr("data-next",s).attr("data-now",r);d.find(".next").remove(),d.find(".prev").remove(),e("<div/>").addClass("next").html(s).appendTo(d),e("<div/>").addClass("prev").html(r).appendTo(d),d.find(".number").html(s),i.settings.showUnits&&o.find(".units").html(a),i.time[t]!==i.prevtime[t]?d.attr("class","digits animate"):d.attr("class","digits")},backupTime:function(){for(var t in i.time)i.prevtime[t]=i.time[t]},resetTime:function(){i.time={year:0,month:0,day:0,hour:0,minute:0,second:0}},getNumberStrLen:function(t){return(""+t).length},padDigits:function(t,e){return Array(Math.max(e-String(t).length+1,0)).join(0)+t}},markup:{generateDigit:function(t,n){var a=e("<div/>").attr("data-name",n).addClass("timeunit"),s=e("<div/>").addClass("digit").appendTo(a),r=e("<div/>").addClass("digits").attr("data-now",t).appendTo(s);e("<span/>").addClass("number").html(t).appendTo(r),i.settings.showUnits&&e("<div/>").addClass("units").html(n).appendTo(a),a.appendTo(i.$elem)},showDigit:function(t){i.$elem.find(".timeunit[data-name="+t+"]").addClass("shown")},hideDigit:function(t){i.settings.showAllDigits||i.$elem.find(".timeunit[data-name="+t+"]").removeClass("shown")}}};e(t).on("load",function(){n.general.overrideSettings(),n.general.initElements()})}},e.fn.flipclock=function(t){return this.each(function(){new i(this,t).init()})},t.Plugin=i}(window,jQuery);